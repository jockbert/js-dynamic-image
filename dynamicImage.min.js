function DynamicImage(e,t,n,i){function f(){return-1==v}function o(e){return function(){return e}}function r(e,t,n){e[t]!=n&&(e[t]=n)}function u(){r(h.style,"height",E())}function a(e){for(var t=e.offsetTop,n=e.offsetLeft,i=e.offsetWidth,f=e.offsetHeight,o=m.pageXOffset,r=m.pageYOffset;e.offsetParent;)e=e.offsetParent,t+=e.offsetTop,n+=e.offsetLeft;return t<r+m.innerHeight&&n<o+m.innerWidth&&t+f>r&&n+i>o}function c(){if(u(),a(h)){var e=h.offsetWidth;if(!(v>=e)){for(var t=i[0],f=n[0],o=1;o<n.length&&n[o-1]<e;++o)t=i[o],f=n[o];f>v&&(h.src=t,v=f,u())}}}function s(){v=-1,h.src="data:image/gif;base64,R0lGODlhAQABAIABAKCgoP///yH5BAEKAAEALAAAAAABAAEAAAICRAEAOw==",c()}function d(e,t){function n(){i=!1,e()}var i=!1;return function(){i||(i=!0,m.setTimeout(n,t))}}function A(){m.addEventListener("resize",l.resizeImageEvent),m.addEventListener("scroll",l.loadImageEvent)}function g(e){return function(t){return e(t),l}}t=t||500,n=n||[],i=i||[];var h=document.createElement("img"),v=-1,l=this,m=window,E=o("100%");l.setSources=function(e,t){n=e,i=t,s()},l.setSource=function(e){i=[e],n=[1e6],s()},s(),l.resizeImageEvent=d(function(){c();var e=n[n.length-1],t=v==e;t&&m.removeEventListener("resize",l.resizeImageEvent)},t),l.loadImageEvent=d(function(){c(),f()||m.removeEventListener("scroll",l.loadImageEvent)},t),A(),l.appendTo=g(function(e){var t=document.getElementById(e);t&&t.appendChild(h)}),l.width=g(function(e){r(h.style,"width",e)}),l.height=g(function(e){E=o(e)}),l.heightAsPixelRatioOfWidth=g(function(e){E=function(){var t=Math.round(h.offsetWidth*e);return t+"px"}}),l.update=g(c)}