function DynamicImage(e,t,n,i){function f(){return-1==h}function o(e){return function(){return e}}function r(e,t,n){e[t]!=n&&(e[t]=n)}function u(){r(g.style,"height",m())}function a(e){for(var t=e.offsetTop,n=e.offsetLeft,i=e.offsetWidth,f=e.offsetHeight,o=l.pageXOffset,r=l.pageYOffset;e.offsetParent;)e=e.offsetParent,t+=e.offsetTop,n+=e.offsetLeft;return t<r+l.innerHeight&&n<o+l.innerWidth&&t+f>r&&n+i>o}function s(){if(u(),a(g)){var e=g.offsetWidth;if(!(h>=e)){for(var t=i[0],f=n[0],o=1;o<n.length&&n[o-1]<e;++o)t=i[o],f=n[o];f>h&&(g.src=t,h=f,u())}}}function c(){h=-1,g.src="data:image/gif;base64,R0lGODlhAQABAIABAKCgoP///yH5BAEKAAEALAAAAAABAAEAAAICRAEAOw==",s()}function d(e,t){function n(){i=!1,e()}var i=!1;return function(){i||(i=!0,l.setTimeout(n,t))}}function A(e){return function(t){return e(t),v}}t=t||500,n=n||[],i=i||[];var g=document.createElement("img"),h=-1,v=this,l=window,m=o("100%");v.setSources=function(e,t){n=e,i=t,c()},v.setSource=function(e){i=[e],n=[1e6],c()},c(),v.resizeImageEvent=d(function(){s();var e=n[n.length-1],t=h==e;t&&l.removeEventListener("resize",v.resizeImageEvent)},t),v.loadImageEvent=d(function(){s(),f()||l.removeEventListener("scroll",v.loadImageEvent)},t),v.register=function(){l.addEventListener("resize",v.resizeImageEvent),l.addEventListener("scroll",v.loadImageEvent)},v.appendTo=A(function(e){var t=document.getElementById(e);t&&t.appendChild(g)}),v.width=A(function(e){r(g.style,"width",e)}),v.height=A(function(e){m=o(e)}),v.heightAsPixelRatioOfWidth=A(function(e){m=function(){var t=Math.round(g.offsetWidth*e);return t+"px"}}),v.update=A(s)}